jQuery(function(a){"use strict";function e(a,e,t,r,o){a.hasOwnProperty("name")&&!a.name&&e.addClass("error"),a.hasOwnProperty("email")&&!a.email&&t.addClass("error"),a.hasOwnProperty("comment")&&!a.comment&&r.addClass("error"),a.hasOwnProperty("captcha")&&!a.captcha_code&&o.addClass("error")}function t(){if("image"===params.captcha_type)r(a(o),a(o).attr("action"));else{if("google"!==params.captcha_type)return!1;null===c?c=grecaptcha.render(s.attr("id"),{sitekey:s.data("sitekey"),theme:"light"}):grecaptcha.reset(c)}return!0}function r(a,e){a.find(".captcha").attr("src",params.captcha_file_url+"?"+Math.random()+"&type="+e).closest(".captcha-container").removeClass("loading")}var o=".bb-contact-form";if(a(o).length){var c=null,s=a(o).find("#boombox-contact-captcha");"image"===params.captcha_type?r(a(o),a(o).attr("action")):"google"===params.captcha_type?a("body").on("boombox/grecaptcha_loaded",function(){null===c?c=grecaptcha.render(s.attr("id"),{sitekey:s.data("boombox-sitekey"),theme:"light"}):grecaptcha.reset(c)}):"google_v3"===params.captcha_type&&grecaptcha.ready(function(){grecaptcha.execute(s.data("boombox-sitekey")).then(function(a){document.getElementById("g-recaptcha-response-contact-form").value=a})})}a("body").on("submit",o,function(r){r.preventDefault();var o=a(this),c=o.find("[name=boombox_name]"),s=o.find("[name=boombox_email]"),n=o.find("[name=boombox_comment]"),m=o.find("[name=boombox_gdpr]"),p=null,i=o.parent().find(".bb-contact-form-msg"),l=o.find("[name=submit]");"image"===params.captcha_type?p=o.find('[name="boombox_captcha_code"]'):"google"!==params.captcha_type&&"google_v3"!==params.captcha_type||(p=o.find('[name="g-recaptcha-response"]'));var d=p&&p.length?1:0;i.html("").removeClass("msg-error msg-success"),o.find(".error").removeClass("error"),l.attr("disabled","disabled");var h={action:"contact_form_submit",name:c.val(),email:s.val(),comment:n.val(),check_captcha:d};m.length&&(h.gdpr=m.is(":checked")?1:0),d&&(h.captcha=p.val()),a.post(params.ajax_url,h,function(r){var m=a.parseJSON(r);if(a.isEmptyObject(m.valid))m.sent?(i.addClass("msg-success").html(params.success_message),o[0].reset(),d&&t()):i.addClass("msg-error").html(params.wrong_message);else{var h=m.message?m.message:params.error_message;i.addClass("msg-error").html(h),d&&t(),e(m.valid,c,s,n,p)}l.removeAttr("disabled")})}),a("body").on("click",".boombox-refresh-captcha",function(e){e.preventDefault();var t=a(this).closest("form"),o=t.attr("action");r(t,o)})});