function froalaImageErrorCallback(e,t,i,a){if(toggleDisabledButton("remove"),5==i.code){var r=t.popups.get("image.insert"),o=r.find(".fr-image-progress-bar-layer");o.find("h3").html(zf_back.zf_max_upload_message)}}function froalaImageInsertedCallback(e,t,i,a){void 0!==i.data("zf_media_id")?i.addClass("wp-image-"+i.data("zf_media_id")):void 0!==a&&void 0!==JSON.parse(a).id&&i.addClass("wp-image-"+JSON.parse(a).id)}function zombify_makeid(){for(var e="",t="abcdefghijklmnopqrstuvwxyz0123456789",i=0;i<10;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function zf_video_upload_func(){jQuery(".zf-video-upload").each(function(){if(1!=jQuery(this).attr("data-zf-resumable")&&0==jQuery(this).parents(".zf-erase-before-save").length){jQuery(this).attr("data-zf-resumable","1");var e=zombify_makeid();jQuery(this).attr("data-zombify-field-unique",e),jQuery(this).closest(".zf-uploader").find("input[data-zombify-field-path='"+jQuery(this).attr("data-zombify-field-path")+"']").attr("data-zombify-field-unique",e);var t=zombify_video_upload.length,i=jQuery(this).attr("data-zombify-field-path"),a=jQuery(".zombify_quiz_type").val(),r=e,o=new ProgressBar(jQuery(this).closest(".zf-uploader").find(".zf-progressbar")),n=jQuery(this);zombify_video_upload[r]=new Resumable({target:zf_back.ajaxurl,query:{field_path:i,unid:e,action:"zombify_video_upload"},uploadMethod:"POST",quiz_type:a,maxFiles:1,chunkSize:zf_back.chunkSize}),zombify_video_upload[r].assignBrowse(jQuery(this)),zombify_video_upload[r].on("fileSuccess",function(e,t){toggleDisabledButton("remove"),t=JSON.parse(t),"undefined"!=typeof t.result&&1==t.result?(jQuery("input[data-zombify-field-path='"+t.field_path+"'][data-zombify-field-unique='"+t.unid+"']").val(t.attachment_id),jQuery("input[data-zombify-field-path='"+t.field_path+"'][data-zombify-field-unique='"+t.unid+"']").attr("data-zf-media-id",t.attachment_id),zombify_virtual_unsaved_form=!0,o.finish(),setTimeout(function(){n.parents(".zf-uploader").find(".zf-preview-video-block").hide(),n.parents(".zf-uploader").addClass("zf-uploader-uploaded"),n.parents(".zf-uploader").next(".zf-file-info").hide(),n.parents(".zf-uploader").find(".zf-video-player-preview").prop("src",t.file_url);var e=n.parents(".zf-uploader").find(".zf-video-player-preview");e.css("display","block")},1e3),ZombifyBuilder.virtualSave()):(o.finish(),jQuery(".zf-preview-video-block").hide(),"undefined"!=typeof t.errorMessage&&""!=t.errorMessage?alert(t.errorMessage):alert(zf_back.translatable.incorrect_file_upload)),ZombifyBuilder.updateShowDependency()}),zombify_video_upload[r].on("fileAdded",function(e,t){var i=1;toggleDisabledButton("add");var a=jQuery("input[data-zombify-field-path='"+this.getOpt("query").field_path+"'][data-zombify-field-unique='"+this.getOpt("query").unid+"']").attr("zf-validation-extensions"),n=a.split(",");for(j=0;j<n.length;j++)n[j]=n[j].trim();var f=e.fileName,s=f.substr(f.lastIndexOf(".")+1);s=s.toLowerCase(),ZombifyBuilder.inArray(s,n)||(i=2);var d=jQuery("input[data-zombify-field-path='"+this.getOpt("query").field_path+"'][data-zombify-field-unique='"+this.getOpt("query").unid+"']").attr("zf-validation-maxsize");d<e.size&&(i=3);var l=jQuery("input[data-zombify-field-path='"+this.getOpt("query").field_path+"'][data-zombify-field-unique='"+this.getOpt("query").unid+"']").closest(".zf-uploader");switch(i){case 1:l.find(".zf-preview-video-block").show(),o.fileAdded(),zombify_video_upload[r].upload();break;case 2:var u=zf_back.translatable.invalid_file_extension+" "+jQuery("input[data-zombify-field-path='"+this.getOpt("query").field_path+"'][data-zombify-field-unique='"+this.getOpt("query").unid+"']").attr("zf-validation-extensions");l.find(".zf-help").length>0?l.find(".zf-help").html(u):l.append('<span class="zf-help">'+u+"</span>");break;case 3:var u=zf_back.translatable.invalid_file_size+" "+Math.round(parseInt(jQuery("input[data-zombify-field-path='"+this.getOpt("query").field_path+"'][data-zombify-field-unique='"+this.getOpt("query").unid+"']").attr("zf-validation-maxsize"))/1024/1024)+zf_back.translatable.mb;l.find(".zf-help").length>0?l.find(".zf-help").html(u):l.append('<span class="zf-help">'+u+"</span>")}}),zombify_video_upload[r].on("progress",function(){o.uploading(100*zombify_video_upload[r].progress())}),zombify_video_upload[r].on("fileError",function(e,t){toggleDisabledButton("remove"),console.debug("fileError",e,t),alert(zf_back.translatable.incorrect_file_upload)}),zombify_video_upload[r].on("error",function(e,t){toggleDisabledButton("remove"),console.debug("error",e,t),alert(zf_back.translatable.incorrect_file_upload)}),jQuery(".zf-progress-cancel-btn").on("click",function(){toggleDisabledButton("add"),t=zombify_video_upload[r].files.length;for(var e=0;e<t;e++){var i=zombify_video_upload[r].files[e].uniqueIdentifier;""!=i&&jQuery.ajax({url:zf_back.ajaxurl,type:"GET",data:{cancel:1,action:"zombify_video_upload",uniqueIdentifier:i},dataType:"json",success:function(e){toggleDisabledButton("remove")}})}zombify_video_upload[r].cancel(),jQuery(this).parents(".zf-preview-video-block").hide()})}})}function ProgressBar(e){this.fileAdded=function(){jQuery(e).find(".zf-progressbar-active").css("width","0%")},this.uploading=function(t){jQuery(e).find(".zf-progressbar-active").css("width",t+"%")},this.finish=function(){}}function zombify_submit_process(e){jQuery(".zf-image-preview-block").each(function(){if(1==jQuery(this).closest(".zf-uploader").find("input[data-zombify-field-type='file']").attr("data-zf-file-browsed")||1==jQuery(this).closest(".zf-uploader").find("input.zf-image_url").attr("data-zf-url-changed")){jQuery(this).show();var t=new ProgressBar(jQuery(this).find(".zf-progressbar"));t.fileAdded(),t.uploading(e>99?99:e),e>=100&&(jQuery(this).addClass("zf_remove_progress"),t.finish())}})}function zf_autosave_virtual(){ZombifyBuilder.virtualSave(),setTimeout("zf_autosave_virtual();",zombify_virtual_save_interval)}function toggleDisabledButton(e){"add"===e?(jQuery(".zf-fixed-bottom-pane").find(".zombify_save").addClass("zf-disabled"),jQuery(".zf-fixed-bottom-pane").find(".zf_discard_virtual").addClass("zf-disabled"),jQuery(".zf-fixed-bottom-pane").find(".zombify_preview").addClass("zf-disabled"),jQuery(".zf-fixed-bottom-pane").find(".zombify_publish").addClass("zf-disabled")):"remove"===e&&(jQuery(".zf-fixed-bottom-pane").find(".zombify_save").removeClass("zf-disabled"),jQuery(".zf-fixed-bottom-pane").find(".zf_discard_virtual").removeClass("zf-disabled"),jQuery(".zf-fixed-bottom-pane").find(".zombify_preview").removeClass("zf-disabled"),jQuery(".zf-fixed-bottom-pane").find(".zombify_publish").removeClass("zf-disabled"))}function IsJsonString(e){try{JSON.parse(e)}catch(t){return!1}return!0}function handleSchedulingDate(e){var t,i,a=jQuery("#aa").val(),r=jQuery("#mm").val(),o=jQuery("#jj").val(),n=jQuery("#hh").val(),f=jQuery("#mn").val(),s=jQuery(".zf-timestamp-wrap"),t=new Date(a,r-1,o,n,f);if(i=new Date(jQuery("#cur_aa").val(),jQuery("#cur_mm").val()-1,jQuery("#cur_jj").val(),jQuery("#cur_hh").val(),jQuery("#cur_mn").val()),t.getFullYear()!=a||1+t.getMonth()!=r||t.getDate()!=o||t.getMinutes()!=f)return s.find("label").each(function(){jQuery(this).addClass("zf-error")}),!1;if(s.find("label").each(function(){jQuery(this).removeClass("zf-error")}),"save"==e){jQuery("#zf-edit-timestamp").show(),jQuery("#zf-cancel-timestamp").hide(),jQuery("#zf-timestampdiv").hide();var d="<i>"+zf_back.translatable.schedule_stamp.date_format.replace("%1$s",jQuery('option[value="'+r+'"]',"#mm").attr("data-text")).replace("%2$s",parseInt(o,10)).replace("%3$s",a).replace("%4$s",("00"+n).slice(-2)).replace("%5$s",("00"+f).slice(-2))+"</i>",l="",u="";t>i&&"future"!=jQuery("#zombify_original_post_status").val()?(l=zf_back.translatable.schedule_stamp.schedule_for,u=zf_back.translatable.publish_button.schedule):t<=i&&"publish"!=jQuery("#zombify_original_post_status").val()?(l=zf_back.translatable.schedule_stamp.publish_on,u=zf_back.translatable.publish_button.publish):(l=zf_back.translatable.schedule_stamp.published_on,u=zf_back.translatable.publish_button.publish),l=l+" "+d;var c=jQuery("#timestamp"),p=jQuery("#stamp_text"),m=jQuery(".zombify_publish").find(".zf-text");c.html(l),p.val(l),m.text(u),i.toUTCString()==t.toUTCString()&&(c.html(zf_stamp),p.val(zf_stamp))}return"cancel"==e&&(jQuery("#timestamp").html(zf_stamp),jQuery("#stamp_text").val(zf_stamp),jQuery("#aa").val(document.getElementById("aa").defaultValue),jQuery("#mm").val(jQuery("#hidden_mm").val()),jQuery("#jj").val(document.getElementById("jj").defaultValue),jQuery("#hh").val(document.getElementById("hh").defaultValue),jQuery("#mn").val(document.getElementById("mn").defaultValue),jQuery(".zombify_publish").find(".zf-text").text(zf_back.translatable.publish_button.publish)),!0}function callFroalaEditor(e,t){e.froalaEditor(t).on("froalaEditor.image.beforeUpload",function(e,t,i){toggleDisabledButton("add")}).on("froalaEditor.image.uploaded",function(e,t,i){toggleDisabledButton("remove")}).on("froalaEditor.image.inserted",function(e,t,i,a){froalaImageInsertedCallback(e,t,i,a)}).on("froalaEditor.image.error",function(e,t,i,a){froalaImageErrorCallback(e,t,i,a)})}function callMediaElementJs(e){!e||-1===e.indexOf("wp-audio-shortcode")&&-1===e.indexOf("wp-video-shortcode")||"undefined"!=typeof mejs&&jQuery(function(){var e={};"undefined"!=typeof _wpmejsSettings&&(e.pluginPath=_wpmejsSettings.pluginPath),e.success=function(e){var t=e.attributes.autoplay&&"false"!==e.attributes.autoplay;"flash"===e.pluginType&&t&&e.addEventListener("canplay",function(){e.play()},!1)},jQuery(".wp-audio-shortcode, .wp-video-shortcode").not(".mejs-container").mediaelementplayer(e)})}!function(e){e.fn.caret=function(e){var t=this[0],i="true"===t.contentEditable;if(0==arguments.length){if(window.getSelection){if(i){t.focus();var a=window.getSelection().getRangeAt(0),r=a.cloneRange();return r.selectNodeContents(t),r.setEnd(a.endContainer,a.endOffset),r.toString().length}return t.selectionStart}if(document.selection){if(t.focus(),i){var a=document.selection.createRange(),r=document.body.createTextRange();return r.moveToElementText(t),r.setEndPoint("EndToEnd",a),r.text.length}var e=0,o=t.createTextRange(),r=document.selection.createRange().duplicate(),n=r.getBookmark();for(o.moveToBookmark(n);0!==o.moveStart("character",-1);)e++;return e}return t.selectionStart?t.selectionStart:0}if(-1==e&&(e=this[i?"text":"val"]().length),window.getSelection)i?(t.focus(),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e);else if(document.body.createTextRange)if(i){var o=document.body.createTextRange();o.moveToElementText(t),o.moveStart("character",e),o.collapse(!0),o.select()}else{var o=t.createTextRange();o.move("character",e),o.select()}return i||t.focus(),e}}(jQuery),!function(e){e.fn.tagEditorInput=function(){var t=" ",i=e(this),a=parseInt(i.css("fontSize")),r=e("<span/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),letterSpacing:i.css("letterSpacing"),whiteSpace:"nowrap"}),o=function(){if(t!==(t=i.val())){r.text(t);var e=r.width()+a;20>e&&(e=20),e!=i.width()&&i.width(e)}};return r.insertAfter(i),i.bind("keyup keydown focus",o)},e.fn.tagEditor=function(t,a,r){function o(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var n,f=e.extend({},e.fn.tagEditor.defaults,t),s=this;if(f.dregex=new RegExp("["+f.delimiter.replace("-","-")+"]","g"),"string"==typeof t){var d=[];return s.each(function(){var i=e(this),o=i.data("options"),n=i.next(".tag-editor");if("getTags"==t)d.push({field:i[0],editor:n,tags:n.data("tags")});else if("addTag"==t){if(o.maxTags&&n.data("tags").length>=o.maxTags)return!1;e('<li><div class="tag-editor-spacer">&nbsp;'+o.delimiter[0]+'</div><div class="tag-editor-tag"></div><div class="tag-editor-delete"><i></i></div></li>').appendTo(n).find(".tag-editor-tag").html('<input type="text" maxlength="'+o.maxLength+'">').addClass("active").find("input").val(a).blur(),r?e(".placeholder",n).remove():n.click()}else"removeTag"==t?(e(".tag-editor-tag",n).filter(function(){return e(this).text()==a}).closest("li").find(".tag-editor-delete").click(),r||n.click()):"destroy"==t&&i.removeClass("tag-editor-hidden-src").removeData("options").off("focus.tag-editor").next(".tag-editor").remove()}),"getTags"==t?d:this}return window.getSelection&&e(document).off("keydown.tag-editor").on("keydown.tag-editor",function(t){if(8==t.which||46==t.which||t.ctrlKey&&88==t.which){try{var a=getSelection(),r="BODY"==document.activeElement.tagName?e(a.getRangeAt(0).startContainer.parentNode).closest(".tag-editor"):0}catch(t){r=0}if(a.rangeCount>0&&r&&r.length){var o=[],n=a.toString().split(r.prev().data("options").dregex);for(i=0;i<n.length;i++){var f=e.trim(n[i]);f&&o.push(f)}return e(".tag-editor-tag",r).each(function(){~e.inArray(e(this).text(),o)&&e(this).closest("li").find(".tag-editor-delete").click()}),!1}}}),s.each(function(){function t(){!f.placeholder||s.length||e(".deleted, .placeholder, input",d).length||d.append('<li class="placeholder"><div>'+f.placeholder+"</div></li>")}function i(i){var a=s.toString();s=e(".tag-editor-tag:not(.deleted)",d).map(function(t,i){var a=e.trim(e(this).hasClass("active")?e(this).find("input").val():e(i).text());return a?a:void 0}).get(),d.data("tags",s),r.val(s.join(f.delimiter[0])),i||a!=s.toString()&&f.onChange(r,d,s),t()}function a(t){for(var a,n=t.closest("li"),l=t.val().replace(/ +/," ").split(f.dregex),u=t.data("old_tag"),c=s.slice(0),p=!1,m=0;m<l.length;m++)if(g=e.trim(l[m]).slice(0,f.maxLength),f.forceLowercase&&(g=g.toLowerCase()),a=f.beforeTagSave(r,d,c,u,g),g=a||g,a!==!1&&g&&(f.removeDuplicates&&~e.inArray(g,c)&&e(".tag-editor-tag",d).each(function(){e(this).text()==g&&e(this).closest("li").remove()}),c.push(g),n.before('<li><div class="tag-editor-spacer">&nbsp;'+f.delimiter[0]+'</div><div class="tag-editor-tag">'+o(g)+'</div><div class="tag-editor-delete"><i></i></div></li>'),f.maxTags&&c.length>=f.maxTags)){p=!0;break}t.attr("maxlength",f.maxLength).removeData("old_tag").val(""),p?t.blur():t.focus(),i()}var r=e(this),s=[],d=e("<ul "+(f.clickDelete?'oncontextmenu="return false;" ':"")+'class="tag-editor"></ul>').insertAfter(r);r.addClass("tag-editor-hidden-src").data("options",f).on("focus.tag-editor",function(){d.click()}),d.append('<li style="width:1px">&nbsp;</li>');var l='<li><div class="tag-editor-spacer">&nbsp;'+f.delimiter[0]+'</div><div class="tag-editor-tag"></div><div class="tag-editor-delete"><i></i></div></li>';d.click(function(t,i){var a,r,o=99999;if(!window.getSelection||""==getSelection())return f.maxTags&&d.data("tags").length>=f.maxTags?(d.find("input").blur(),!1):(n=!0,e("input:focus",d).blur(),!!n&&(n=!0,e(".placeholder",d).remove(),i&&i.length?r="before":e(".tag-editor-tag",d).each(function(){var n=e(this),f=n.offset(),s=f.left,d=f.top;t.pageY>=d&&t.pageY<=d+n.height()&&(t.pageX<s?(r="before",a=s-t.pageX):(r="after",a=t.pageX-s-n.width()),o>a&&(o=a,i=n))}),"before"==r?e(l).insertBefore(i.closest("li")).find(".tag-editor-tag").click():"after"==r?e(l).insertAfter(i.closest("li")).find(".tag-editor-tag").click():e(l).appendTo(d).find(".tag-editor-tag").click(),!1))}),d.on("click",".tag-editor-delete",function(){if(e(this).prev().hasClass("active"))return e(this).closest("li").find("input").caret(-1),!1;var a=e(this).closest("li"),o=a.find(".tag-editor-tag");return f.beforeTagDelete(r,d,s,o.text())!==!1&&(o.addClass("deleted").animate({width:0},f.animateDelete,function(){a.remove(),t()}),i(),!1)}),f.clickDelete&&d.on("mousedown",".tag-editor-tag",function(a){if(a.ctrlKey||a.which>1){var o=e(this).closest("li"),n=o.find(".tag-editor-tag");return f.beforeTagDelete(r,d,s,n.text())!==!1&&(n.addClass("deleted").animate({width:0},f.animateDelete,function(){o.remove(),t()}),i(),!1)}}),d.on("click",".tag-editor-tag",function(t){if(f.clickDelete&&(t.ctrlKey||t.which>1))return!1;if(!e(this).hasClass("active")){var i=e(this).text(),a=Math.abs((e(this).offset().left-t.pageX)/e(this).width()),r=parseInt(i.length*a),n=e(this).html('<input type="text" maxlength="'+f.maxLength+'" value="'+o(i)+'">').addClass("active").find("input");if(n.data("old_tag",i).tagEditorInput().focus().caret(r),f.autocomplete){var s=e.extend({},f.autocomplete),l="select"in s?f.autocomplete.select:"";s.select=function(t,i){l&&l(t,i),setTimeout(function(){d.trigger("click",[e(".active",d).find("input").closest("li").next("li").find(".tag-editor-tag")])},20)},n.autocomplete(s)}}return!1}),d.on("blur","input",function(l){l.stopPropagation();var u=e(this),c=u.data("old_tag"),p=e.trim(u.val().replace(/ +/," ").replace(f.dregex,f.delimiter[0]));if(p){if(p.indexOf(f.delimiter[0])>=0)return void a(u);if(p!=c)if(f.forceLowercase&&(p=p.toLowerCase()),cb_val=f.beforeTagSave(r,d,s,c,p),p=cb_val||p,cb_val===!1){if(c)return u.val(c).focus(),n=!1,void i();try{u.closest("li").remove()}catch(l){}c&&i()}else f.removeDuplicates&&e(".tag-editor-tag:not(.active)",d).each(function(){e(this).text()==p&&e(this).closest("li").remove()})}else{if(c&&f.beforeTagDelete(r,d,s,c)===!1)return u.val(c).focus(),n=!1,void i();try{u.closest("li").remove()}catch(l){}c&&i()}u.parent().html(o(p)).removeClass("active"),p!=c&&i(),t()});var u;d.on("paste","input",function(){e(this).removeAttr("maxlength"),u=e(this),setTimeout(function(){a(u)},30)});var c;d.on("keypress","input",function(t){f.delimiter.indexOf(String.fromCharCode(t.which))>=0&&(c=e(this),setTimeout(function(){a(c)},20))}),d.on("keydown","input",function(t){var i=e(this);if((37==t.which||!f.autocomplete&&38==t.which)&&!i.caret()||8==t.which&&!i.val()){var a=i.closest("li").prev("li").find(".tag-editor-tag");return a.length?a.click().find("input").caret(-1):!i.val()||f.maxTags&&d.data("tags").length>=f.maxTags||e(l).insertBefore(i.closest("li")).find(".tag-editor-tag").click(),!1}if((39==t.which||!f.autocomplete&&40==t.which)&&i.caret()==i.val().length){var o=i.closest("li").next("li").find(".tag-editor-tag");return o.length?o.click().find("input").caret(0):i.val()&&d.click(),!1}if(9==t.which){if(t.shiftKey){var a=i.closest("li").prev("li").find(".tag-editor-tag");if(a.length)a.click().find("input").caret(0);else{if(!i.val()||f.maxTags&&d.data("tags").length>=f.maxTags)return r.attr("disabled","disabled"),void setTimeout(function(){r.removeAttr("disabled")},30);e(l).insertBefore(i.closest("li")).find(".tag-editor-tag").click()}return!1}var o=i.closest("li").next("li").find(".tag-editor-tag");if(o.length)o.click().find("input").caret(0);else{if(!i.val())return;d.click()}return!1}if(!(46!=t.which||e.trim(i.val())&&i.caret()!=i.val().length)){var o=i.closest("li").next("li").find(".tag-editor-tag");return o.length?o.click().find("input").caret(0):i.val()&&d.click(),!1}if(13==t.which)return d.trigger("click",[i.closest("li").next("li").find(".tag-editor-tag")]),f.maxTags&&d.data("tags").length>=f.maxTags&&d.find("input").blur(),!1;if(36!=t.which||i.caret()){if(35==t.which&&i.caret()==i.val().length)d.find(".tag-editor-tag").last().click();else if(27==t.which)return i.val(i.data("old_tag")?i.data("old_tag"):"").blur(),!1}else d.find(".tag-editor-tag").first().click()});for(var p=f.initialTags.length?f.initialTags:r.val().split(f.dregex),m=0;m<p.length&&!(f.maxTags&&m>=f.maxTags);m++){var g=e.trim(p[m].replace(/ +/," "));g&&(f.forceLowercase&&(g=g.toLowerCase()),s.push(g),d.append('<li><div class="tag-editor-spacer">&nbsp;'+f.delimiter[0]+'</div><div class="tag-editor-tag">'+o(g)+'</div><div class="tag-editor-delete"><i></i></div></li>'))}i(!0),f.sortable&&e.fn.sortable&&d.sortable({distance:5,cancel:".tag-editor-spacer, input",helper:"clone",update:function(){i()}})})},e.fn.tagEditor.defaults={initialTags:[],maxTags:0,maxLength:50,delimiter:",;",placeholder:"",forceLowercase:!0,removeDuplicates:!0,clickDelete:!1,animateDelete:175,sortable:!0,autocomplete:null,onChange:function(){},beforeTagSave:function(){},beforeTagDelete:function(){}}}(jQuery),Array.prototype.contains=function(e){for(var t=this.length;t--;)if(this[t]===e)return!0;return!1};var isSafari11=!1;navigator.browserSpecs=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""}):"Chrome"===i[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?{name:e[1].replace("OPR","Opera"),version:e[2]}:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),{name:i[0],version:i[1]})}(),"safari"==navigator.browserSpecs.name.toLowerCase()&&navigator.browserSpecs.version>=11&&navigator.browserSpecs.version<11.5&&(isSafari11=!0);var ZombifyBuilder=new function(){this.saving_post=!1,this.saving_virtual_post=!1,this.trigger_post_save=!1,this.input_focus=!1,this.trigger_post_save_data={},this.addGroup=function(e){if(quiz_type=e.closest("form").find(".zombify_quiz_type").val(),group_name=e.data("zombify-group"),1==e.attr("data-zombify-inside"))var t=e.closest(".zombify_group").parent().closest(".zombify_group");else var t=e.closest(".zombify_group");if(t.length>0)var i=t;else var i=e.closest(".zombify_quiz");var a=i.find(".zf-"+group_name+"-container").data("reverse");i.find(".zombify_group[data-zombify-group-name='"+group_name+"']").eq(0).find(".zf-wysiwyg-advanced").each(function(){0===jQuery(this).parents(".zf-erase-before-save").length&&jQuery(this).froalaEditor("destroy")}),i.find(".zombify_group[data-zombify-group-name='"+group_name+"']").eq(0).find(".zf-wysiwyg-light").each(function(){0===jQuery(this).parents(".zf-erase-before-save").length&&jQuery(this).froalaEditor("destroy")}),i.find(".zombify_group[data-zombify-group-name='"+group_name+"']").eq(0).find(".zf-result-wysiwyg-light.active").each(function(){0===jQuery(this).parents(".zf-erase-before-save").length&&jQuery(this).froalaEditor("destroy")});var r=i.find(".zombify_group[data-zombify-group-name='"+group_name+"']").eq(0).clone();i.find(".zombify_group[data-zombify-group-name='"+group_name+"']").eq(0).find(".zf-wysiwyg-advanced").each(function(){0===jQuery(this).parents(".zf-erase-before-save").length&&jQuery(this).froalaEditor(zf_wysiwyg_config_advanced)}),i.find(".zombify_group[data-zombify-group-name='"+group_name+"']").eq(0).find(".zf-wysiwyg-light").each(function(){0===jQuery(this).parents(".zf-erase-before-save").length&&jQuery(this).froalaEditor(zf_wysiwyg_config_light)}),i.find(".zombify_group[data-zombify-group-name='"+group_name+"']").eq(0).find(".zf-result-wysiwyg-light.active").each(function(){0===jQuery(this).parents(".zf-erase-before-save").length&&jQuery(this).froalaEditor(zf_wysiwyg_config_light)}),""!=e.attr("data-include-group")&&r.find(".zf-included-group").each(function(){jQuery(this).hasClass("zf-"+e.attr("data-include-group")+"_container")||jQuery(this).remove()}),r.find('input[type="file"]').attr("data-zf-file-browsed",0),r.find(".zf-image-preview-block").hide(),r.find(".zf-image-preview-block").removeClass("zf_remove_progress"),r.find(".zombify_clone").remove(),r.addClass("zombify_clone"),r.find(".zf-hidden").removeClass("zf-hidden"),r.find(":input[type!='checkbox'][type!='radio']").val(""),r.find(":input[type='radio'][data-zombify-erase-on-clone]").prop("checked",!1),r.find(".zombify_uploaded_image_item").remove(),r.find(".zf-embed-video").html(""),r.find(".zf-components").removeClass("zf-open"),r.find(".zombify_group_format").attr("data-group",e.data("type")),r.find("input[data-zombify-field-path='story/group_format']").val(e.data("type")),r.find(".zf-uploader").removeClass("zf-uploader-uploaded"),r.find(".zf-uploader").find(".zf-preview-img").attr("src","").hide(),r.find("[data-unique-id]").each(function(){randStr=ZombifyBuilder.randomString(32),jQuery(this).val(randStr)});var o=new RegExp("\\["+group_name+"\\]\\[\\d+\\]");r.find(":input").each(function(){this.name=this.name.replace(o,"["+group_name+"][10000]"),jQuery(this).attr("data-zombify-name-index","10000")}),1==e.attr("data-zombify-inside")?r.insertAfter(e.closest(".zombify_group")):"first"==e.attr("data-zombify-position")?r.prependTo(i.find(".zf-"+group_name+"_container")):r.appendTo(i.find(".zf-"+group_name+"_container")),r.find(".zf-wysiwyg-advanced").froalaEditor(zf_wysiwyg_config_advanced),r.find(".zf-wysiwyg-light").froalaEditor(zf_wysiwyg_config_light),r.find(".zf-result-wysiwyg-light.active").each(function(){jQuery(this).removeClass("active"),jQuery(this).froalaEditor("destroy"),jQuery(this).css({display:"block",height:"80px"}),jQuery(this).siblings(".fr-box.fr-basic").remove()}),r.find(".zf-video-upload").each(function(){jQuery(this).attr("data-zf-resumable","")}),r.find(".zf-help").remove(),r.parents(".zf-answers_container").find(".zombify_group").length>1?r.parents(".zf-answers_container").find(".zombify_group").each(function(){jQuery(this).find(".zombify_delete_group").removeClass("zf-hide-delete-icon")}):r.parents(".zf-results_container").find(".zombify_group").length>1?r.parents(".zf-results_container").find(".zombify_group").each(function(){jQuery(this).find(".zombify_delete_group").removeClass("zf-hide-delete-icon")}):r.parents(".zf-list_container").find(".zombify_group").length>1?r.parents(".zf-list_container").find(".zombify_group").each(function(){jQuery(this).find(".zombify_delete_group").removeClass("zf-hide-delete-icon")}):(r.find(".zf-answers_container").find(".zombify_group").find(".zombify_delete_group").addClass("zf-hide-delete-icon"),r.parents(".zf-questions_container").find(".zombify_delete_group").each(function(){0==jQuery(this).parents(".zf-answers_container").length&&jQuery(this).removeClass("zf-hide-delete-icon")}));var n=i.find(".zf-"+group_name+"_container").find(".zombify_group[data-zombify-group-name='"+group_name+"']");n.each(function(t){var i="["+group_name+"]["+t+"]";1!=e.attr("data-zf-not-arrange-group")&&jQuery(this).find(".zf-index").html(a?n.length-t:t+1),jQuery(this).find(":input").each(function(){this.name=this.name.replace(o,i);var e=jQuery(this).closest(".zombify_group").index();jQuery(this).attr("data-zombify-name-index",e),1==jQuery(this).attr("data-zf-use-index-as-value")&&jQuery(this).val(e)}),jQuery(this).find(".zombify_medatype_radio[checked]").prop("checked",!0)}),this.updateDependencies(!1),"1"==e.data("zf-without-focus")?(this.input_focus?r.find(".zf-inner-wrapper input[type=text]:first").focus():jQuery("input[data-zombify-field-path='title']").focus(),e.data("zf-without-focus","0"),this.input_focus=!0):e.data("type")?r.find(".zf-inner-wrapper[data-type="+e.data("type")+"] input:first").focus():r.find(".zf-inner-wrapper input[type=text]:first").focus()},this.randomString=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},this.deleteGroup=function(e){if(zombify_group=e.closest(".zombify_group"),group_name=zombify_group.attr("data-zombify-group-name"),zombify_group.parent().find(".zombify_group[data-zombify-group-name='"+group_name+"']").length>1||e.closest(".zf-"+group_name+"_container").hasClass("zf-must-delete")){zombify_group.removeClass("zombify_group");var t=new RegExp("\\["+group_name+"\\]\\[\\d+\\]");e.closest(".zf-"+group_name+"_container").find(".zombify_group[data-zombify-group-name='"+group_name+"']").each(function(e){var i="["+group_name+"]["+e+"]";jQuery(this).find(":input").each(function(){this.name=this.name.replace(t,i)})});var i=zombify_group.parents(".zf-"+group_name+"-container").data("reverse"),a=zombify_group.parent().find(".zombify_group[data-zombify-group-name='"+group_name+"']");a.each(function(r){var o="["+group_name+"]["+r+"]";1!=e.attr("data-zf-not-arrange-group")&&jQuery(this).find(".zf-index").html(i?a.length-r:r+1),jQuery(this).find(":input").each(function(){this.name=this.name.replace(t,o),jQuery(this).attr("data-zombify-name-index",r)})}),1==zombify_group.parent().find(".zombify_group[data-zombify-group-name='"+group_name+"']").length&&("answers"===group_name||"results"===group_name||"list"===group_name?zombify_group.parent().find(".zombify_group[data-zombify-group-name='"+group_name+"']").find(".zombify_delete_group").addClass("zf-hide-delete-icon"):"questions"===group_name&&zombify_group.parent().find(".zombify_group[data-zombify-group-name='"+group_name+"']").find(".zombify_delete_group").each(function(){0==jQuery(this).parents(".zf-answers_container").length&&jQuery(this).addClass("zf-hide-delete-icon")})),zombify_group.remove()}else{zombify_group.find(".zf-wysiwyg-advanced").each(function(){jQuery(this).froalaEditor("destroy")}),zombify_group.find(".zf-wysiwyg-light").each(function(){jQuery(this).froalaEditor("destroy")});var r=zombify_group.clone();r.find(".zombify_clone").remove(),r.removeClass("zombify_clone"),r.find(":input").val(""),r.appendTo(zombify_group.parent()),zombify_group.remove();var t=new RegExp("\\["+group_name+"\\]\\[\\d+\\]"),o="["+group_name+"][0]";r.find(":input").each(function(){this.name=this.name.replace(t,o)}),r.find(".zf-wysiwyg-advanced").froalaEditor(zf_wysiwyg_config_advanced),r.find(".zf-wysiwyg-light").froalaEditor(zf_wysiwyg_config_light)}this.updateDependencies(!1)},this.deleteMedia=function(e){e.parent().find("img").each(function(){jQuery(this).attr("src","").hide()}),e.parent().find(".zf-preview-gif-mp4").hide(),e.parent().find(".zf-preview-gif-mp4").find("source").attr("src",""),e.parent().find('input[type="file"]').val(""),e.parent().removeClass("zf-uploader-uploaded"),e.parent().find(".zf-video-player").hide(),e.parent().find(".zf-image_url").val(""),e.parent().find("input[data-zf-media-id]").val(""),e.parent().find("input[data-zf-media-id]").attr("data-zf-media-id","")},this.virtualSave=function(){if(this.saving_post||0==zombify_virtual_unsaved_form||0==jQuery(".zombify_quiz_type").length||"meme"==jQuery(".zombify_quiz_type").val())return!1;if(this.saving_post=!0,this.saving_virtual_post=!0,jQuery("#meme_settings").length>0){if(!createImageDataPressed())return this.saving_post=!1,0!==jQuery(".zf-meme").find(".zf-start").find(".zf-help").length&&jQuery(".zf-meme").find(".zf-start").find(".zf-help").remove(),jQuery(".zf-meme").find(".zf-start").append('<span class="zf-help">The field is required</span>'),!1;createImageDataPressed(),jQuery("#meme_settings").val(encodeObj(zombify_settings))}var e=jQuery(".zf-erase-before-save").html();if(jQuery(".zf-erase-before-save").html(""),isSafari11){var t=jQuery("#zombify-form"),i=jQuery('input[type="file"]:not([disabled])',t);i.each(function(e,t){t.files.length>0||jQuery(t).prop("disabled",!0)})}var a=new FormData(jQuery("#zombify-form")[0]);isSafari11&&i.prop("disabled",!1),jQuery(".zf-erase-before-save").html(e),a.append("action","zombify_virtual_save"),url_post_id=parseInt(jQuery(".zombify_post_id").val()),zombify_virtual_unsaved_form=!1;var r=zf.ajaxurl+"?action=virtual_save"+(url_post_id?"&post_id="+url_post_id:"");if("undefined"!=typeof zombify_virtual_addit_data){var o=jQuery.param(zombify_virtual_addit_data);""!=o&&(r+="&"+o),zombify_virtual_addit_data={}}var n=jQuery("input[data-zf-file-browsed='1']"),f=jQuery("input[data-zf-url-changed='1']");jQuery.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;t=parseInt(100*t),zombify_submit_process(t)}},!1),e},url:r,type:"POST",data:a,async:!0,dataType:"json",success:function(e){if(zombify_virtual_save_interval=zombify_virtual_save_interval_default,"undefined"!=typeof e.result)if(1==e.result){var t=function(e,t,i){return function(a,r){var o=jQuery(r).attr("name");if(!o)return!1;o=o.replace("file_url][",""),o=o.replace("[]",""),o=o.substr(8,o.length-9);var n=o.split("]["),f=e.data,s=!0;n=Object.keys(n).map(function(e){return n[e]});for(var d=0;d<n.length;d++){if("undefined"==typeof f[n[d]]){s=!1;break}f=f[n[d]]}if(s){var l=jQuery(r).attr("name");l=l.replace("[]",""),
l=l.substr(7),l=l.replace("[file_url]",""),filedatahtml="",f=Object.keys(f).map(function(e){return f[e]});for(var u=0;u<f.length;u++)filedatahtml+='<div class="zombify_uploaded_image_item">',filedatahtml+='<input type="hidden" name="zombify_existing_data'+l+"["+u+'][attachment_id]" data-zf-media-id="'+f[u].attachment_id+'" value="'+f[u].attachment_id+'">',filedatahtml+='<input type="hidden" name="zombify_existing_data'+l+"["+u+'][existingfile]" value="1">',filedatahtml+="</div>";1==jQuery(r).closest(t).find(".zombify_uploaded_image_data").attr("zf-changed-uploaded-items")?jQuery(r).closest(t).find(".zombify_uploaded_image_data").append(filedatahtml):jQuery(r).closest(t).find(".zombify_uploaded_image_data").html(filedatahtml),jQuery(r).closest(t).find(".zombify_uploaded_image_data").attr("zf-changed-uploaded-items","1")}jQuery(r).val(""),jQuery(r).attr(i,"0")}};n.each(t(e,".zf-form-group","data-zf-file-browsed")),f.each(t(e,".zf-uploader","data-zf-url-changed")),jQuery(".zombify_uploaded_image_data").attr("zf-changed-uploaded-items","0")}else for(var i=0;i<e.errors.length;i++)"undefined"!=typeof e.errors[i].uploaded&&"undefined"!=typeof e.errors[i].uploaded.original&&jQuery(".zf-image_url").each(function(){jQuery(this).val()==e.errors[i].uploaded.original&&(jQuery(this).val(""),jQuery(this).closest(".zf-uploader").find(".zf-remove-media").closest(".zf-form-group").find(".zf-help").length>0?jQuery(this).closest(".zf-uploader").find(".zf-remove-media").closest(".zf-form-group").find(".zf-help").html(e.errors[i].error.errorMessage):jQuery(this).closest(".zf-uploader").find(".zf-remove-media").closest(".zf-form-group").append('<div class="zf-help">'+e.errors[i].error.errorMessage+"</div>"),ZombifyBuilder.deleteMedia(jQuery(this).closest(".zf-uploader").find(".zf-remove-media")),ZombifyBuilder.updateShowDependency(),jQuery(this).closest(".zf-uploader").find(".zf-remove-media").closest(".zf-form-group").find(".zombify_uploaded_image_item").remove())});ZombifyBuilder.saving_post=!1,ZombifyBuilder.saving_virtual_post=!1,ZombifyBuilder.trigger_post_save&&(ZombifyBuilder.trigger_post_save=!1,ZombifyBuilder.save(ZombifyBuilder.trigger_post_save_data.eButton,ZombifyBuilder.trigger_post_save_data.preview,ZombifyBuilder.trigger_post_save_data.publish)),n.each(function(){jQuery(this).closest(".zf-uploader").find(".zf_remove_progress").hide(),jQuery(this).closest(".zf-uploader").find(".zf_remove_progress").removeClass("zf_remove_progress")}),f.each(function(){jQuery(this).closest(".zf-uploader").find(".zf_remove_progress").hide(),jQuery(this).closest(".zf-uploader").find(".zf_remove_progress").removeClass("zf_remove_progress")})},error:function(e){toggleDisabledButton("remove"),ZombifyBuilder.saving_post=!1,ZombifyBuilder.saving_virtual_post=!1,ZombifyBuilder.trigger_post_save&&(ZombifyBuilder.trigger_post_save=!1,ZombifyBuilder.save(ZombifyBuilder.trigger_post_save_data.eButton,ZombifyBuilder.trigger_post_save_data.preview,ZombifyBuilder.trigger_post_save_data.publish)),n.each(function(){jQuery(this).closest(".zf-uploader").find(".zf_remove_progress").hide(),jQuery(this).closest(".zf-uploader").find(".zf_remove_progress").removeClass("zf_remove_progress")})},cache:!1,contentType:!1,processData:!1})},this.save=function(e,t,i){if(this.saving_post)return this.saving_virtual_post&&(e.addClass("zf-loading"),this.trigger_post_save=!0,this.trigger_post_save_data={eButton:e,preview:t,publish:i}),!1;if(this.saving_post=!0,"undefined"==typeof t&&(t=!1),"undefined"==typeof i&&(i=!1),jQuery(".zombify_save").parent().find(".zf-button-cont.zf-saved").remove(),e.addClass("zf-loading"),toggleDisabledButton("add"),jQuery("#meme_settings").length>0){if(!createImageDataPressed())return e.removeClass("zf-loading"),toggleDisabledButton("remove"),this.saving_post=!1,0!==jQuery(".zf-meme").find(".zf-start").find(".zf-help").length&&jQuery(".zf-meme").find(".zf-start").find(".zf-help").remove(),jQuery(".zf-meme").find(".zf-start").append('<span class="zf-help">The field is required</span>'),!1;createImageDataPressed(),jQuery("#meme_settings").val(encodeObj(zombify_settings))}if(jQuery(".zf-erase-before-save").remove(),isSafari11){var a=jQuery("#zombify-form"),r=jQuery('input[type="file"]:not([disabled])',a);r.each(function(e,t){t.files.length>0||jQuery(t).prop("disabled",!0)})}var o=new FormData(jQuery("#zombify-form")[0]);isSafari11&&r.prop("disabled",!1),o.append("action","zombify_save"),i&&o.append("zombify_publish_post","1"),url_post_id=parseInt(e.closest("form").find(".zombify_post_id").val()),jQuery.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;t=parseInt(100*t),zombify_submit_process(100==t?zf.translatable.processing_files:zf.translatable.uploading_files+": "+t+"%")}},!1),e},url:zf.ajaxurl+"?action=save"+(url_post_id?"&post_id="+url_post_id:""),type:"POST",data:o,async:!0,dataType:"json",success:function(t){e.removeClass("zf-loading"),toggleDisabledButton("remove"),"undefined"!=typeof t.result?((0==t.result||1==t.result&&!i)&&jQuery(".zombify_quiz").replaceWith(t.output),jQuery(".zf-result-wysiwyg-light.active").froalaEditor(zf_wysiwyg_config_light),zf_video_upload_func(),zfContainerWidth(),jQuery("#tag-editor").length&&(jQuery("#tag-editor").tagEditor("destroy"),jQuery("#tag-editor").tagEditor({placeholder:jQuery("#tag-editor").attr("placeholder"),maxTags:jQuery("#tag-editor").attr("data-count-limit"),autocomplete:{delay:0,position:{collision:"flip"},source:zf.ajaxurl+"?action=zombify_get_tags"},forceLowercase:!1})),jQuery(".zf-wysiwyg-advanced").each(function(){0===jQuery(this).parents(".zf-erase-before-save").length&&jQuery(this).froalaEditor(zf_wysiwyg_config_advanced)}),jQuery(".zf-wysiwyg-light").each(function(){0===jQuery(this).parents(".zf-erase-before-save").length&&jQuery(this).froalaEditor(zf_wysiwyg_config_light)}),1==t.result?(jQuery(".zf-button-cont.zf-draft").hide(),zombify_unsaved_form=!1,jQuery(".zf-errors-btn").hide(),i?window.location=t.post_url:(jQuery(".zombify_preview").attr("href",t.post_url).removeClass("zf-disabled"),ZombifyBuilder.saving_post=!1,0==jQuery(".zombify_save").parent().find(".zf-button-cont.zf-saved").length&&jQuery(".zombify_save").after('<div class="zf-float-left zf-button-cont zf-saved"><i class="zf-icon zf-icon-check"></i>'+zf.translatable.saved+"</div>")),""!==jQuery(".meme-template").val()&&jQuery("#zf-meme-img").attr("src",jQuery(".meme-template").val()),initMeme(jQuery),e.closest("form").find(".zombify_post_id").val(t.post_id)):(jQuery(".zf-error").length>0&&(jQuery(".zf-error").find(".zf-uploader-uploaded").removeClass("zf-uploader-uploaded"),jQuery(".zf-errors-btn").find(".zf-custom-error").remove(),jQuery(".zf-errors-btn").find(".zf-errors-count").show(),jQuery(".zf-errors-btn").show(),jQuery(".zf-errors-btn").find(".zf-errors-count").html(jQuery(".zf-error").length),1===jQuery(".zf-error").length?(jQuery(".zf-errors-btn").find(".zf-single-error-case").show(),jQuery(".zf-errors-btn").find(".zf-many-errors-case").hide()):(jQuery(".zf-errors-btn").find(".zf-single-error-case").hide(),jQuery(".zf-errors-btn").find(".zf-many-errors-case").show())),""!==jQuery(".meme-template").val()&&jQuery("#zf-meme-img").attr("src",jQuery(".meme-template").val()),initMeme(jQuery),jQuery("#zombify-main-section .zf-error:first")[0].scrollIntoView(!0),ZombifyBuilder.saving_post=!1),ZombifyBuilder.correctBuilder(),ZombifyBuilder.updateShowDependency(),ZombifyBuilder.updateDependencies(!0),jQuery(".zf-multiple-select").zombifyMultiSelect()):ZombifyBuilder.saving_post=!1,jQuery(".zf_remove_progress").hide(),jQuery(".zf_remove_progress").removeClass("zf_remove_progress")},error:function(t){if(console.log("error"),IsJsonString(t.responseText)){var i=jQuery.parseJSON(t.responseText);i&&"undefined"!=typeof i.message&&""!=i.message?errorMessage=i.message:errorMessage=zf.translatable.unknown_error}else errorMessage=zf.translatable.unknown_error;0==jQuery(".zf-errors-btn").find(".zf-custom-error").length?jQuery(".zf-errors-btn").append('<span class="zf-custom-error">'+errorMessage+"</span>"):jQuery(".zf-errors-btn").find(".zf-custom-error").html(errorMessage),jQuery(".zf-errors-btn").find(".zf-custom-error").show(),jQuery(".zf-errors-btn").find(".zf-single-error-case").hide(),jQuery(".zf-errors-btn").find(".zf-many-errors-case").hide(),jQuery(".zf-errors-btn").find(".zf-errors-count").hide(),jQuery(".zf-errors-btn").show(),ZombifyBuilder.saving_post=!1,e.removeClass("zf-loading"),toggleDisabledButton("remove"),jQuery(".zf-image-preview-block").hide()},cache:!1,contentType:!1,processData:!1})},this.sort=function(e,t){switch(t){case"down":var i=e.next();e.insertAfter(i);break;case"up":var i=e.prev();e.insertBefore(i);break;default:return console.log("Incorrect direction"),!1}if(e[0].scrollIntoView(!0),e.parent().closest(".zombify_group").length>0)var a=e.parent().closest(".zombify_group");else var a=e.parent().closest(".zombify_quiz");var r=a.find(".zf-"+e.attr("data-zombify-group-name")+"-container").data("reverse"),o=(new RegExp("\\["+e.attr("data-zombify-group-name")+"\\]\\[\\d+\\]"),a.find(".zf-"+e.attr("data-zombify-group-name")+"_container").find(".zombify_group[data-zombify-group-name='"+e.attr("data-zombify-group-name")+"']"));o.each(function(e){jQuery(this).find(".zf-index").html(r?o.length-e:e+1)}),this.updateDependencies(!1)},this.changeMediaType=function(e){jQuery(e).prop("checked",!0);var t=jQuery(e).val();switch(t){case"embed":e.closest(".zf-form-group").find(".zombify_medatype_image").find(":input").prop("disabled",!0),e.closest(".zf-form-group").find(".zombify_medatype_embed").find(":input").prop("disabled",!1);break;case"image":e.closest(".zf-form-group").find(".zombify_medatype_image").find(":input").prop("disabled",!1),e.closest(".zf-form-group").find(".zombify_medatype_embed").find(":input").prop("disabled",!0);break;default:console.log("Unknown media type")}},this.correctBuilder=function(){if(jQuery('textarea[name="zombify[preface_description]"]').length>0){var e=jQuery('textarea[name="zombify[preface_description]"]').val();jQuery('textarea[name="zombify[preface_description]"]').val(e)}jQuery(".zf-form-group_media").each(function(){var e=jQuery(this).find(".zombify_medatype_radio:checked").val();jQuery(this).find(".zf-media-uploader").attr("data-format",e)}),jQuery(".js-zf-answer-format input:checked").each(function(){var e=jQuery(this).data("format");jQuery(this).parent().parent().siblings(".zf-answers-box").attr("data-format",e)})},this.updateDependencies=function(e){jQuery("select[data-zombify-dependency]").each(function(){var t=jQuery(this),i=e?t.attr("data-zf-seled-val"):t.val(),a=t.attr("data-zombify-dependency");t.find("option[value!='']").remove(),jQuery(":input[data-zombify-field-path='"+a+"']").each(function(){jQuery(this).val()&&t.append('<option value="'+jQuery(this).attr("data-zombify-name-index")+'" '+(jQuery(this).attr("data-zombify-name-index")==i?"selected":"")+">"+jQuery(this).val()+"</option>")})}),this.updateShowDependency()},this.updateShowDependency=function(){jQuery("input[data-zombify-show-dependency]").each(function(){var e=jQuery(this).closest(".zombify_group").length>0?jQuery(this).closest(".zombify_group"):jQuery(this).closest(".zf-main").length>0?jQuery(this).closest(".zf-main"):jQuery(this).closest(".zombify-main-section"),t=jQuery(this).attr("data-zombify-show-dependency"),i=t.split(","),a=0;for(ii=0;ii<i.length;ii++)"file"==e.find("input[data-zombify-field-path='"+i[ii]+"']").attr("type")&&""==e.find("input[data-zombify-field-path='"+i[ii]+"']").val()&&0==e.find("input[data-zombify-field-path='"+i[ii]+"']").closest(".zf-uploader").find(".zombify_uploaded_image_data").find(".zombify_uploaded_image_item").length||"checkbox"==e.find("input[data-zombify-field-path='"+i[ii]+"']").attr("type")&&0==e.find("input[data-zombify-field-path='"+i[ii]+"']").prop("checked")||e.find("input[data-zombify-field-path='"+i[ii]+"']").length>0&&"url"==e.find("input[data-zombify-field-path='"+i[ii]+"']").attr("type")&&""==e.find("input[data-zombify-field-path='"+i[ii]+"']").val()||e.find("input[data-zombify-field-path='"+i[ii]+"']").length>0&&"text"==e.find("input[data-zombify-field-path='"+i[ii]+"']").attr("type")&&""==e.find("input[data-zombify-field-path='"+i[ii]+"']").val()||e.find("input[data-zombify-field-path='"+i[ii]+"']").length>0&&"hidden"==e.find("input[data-zombify-field-path='"+i[ii]+"']").attr("type")&&""==e.find("input[data-zombify-field-path='"+i[ii]+"']").val()||e.find("textarea[data-zombify-field-path='"+i[ii]+"']").length>0&&""==e.find("textarea[data-zombify-field-path='"+i[ii]+"']").val()||(a=1);0==a?(jQuery(this).css("visibility","hidden"),"text"==jQuery(this).attr("type")&&jQuery(this).val(""),"checkbox"==jQuery(this).attr("type")&&jQuery(this).prop("checked",!1),jQuery(this).parent().hasClass("zf-form-group")&&jQuery(this).parent().hide(),jQuery(this).parent().parent().hasClass("zf-form-group")&&jQuery(this).parent().parent().hide(),jQuery(this).parent().parent().parent().hasClass("zf-form-group")&&!jQuery(this).parent().parent().parent().hasClass("zf-dependency-show")&&jQuery(this).parent().parent().parent().hide()):(jQuery(this).css("visibility","visible"),jQuery(this).parent().hasClass("zf-form-group")&&jQuery(this).parent().show(),jQuery(this).parent().parent().hasClass("zf-form-group")&&jQuery(this).parent().parent().show(),jQuery(this).parent().parent().parent().hasClass("zf-form-group")&&!jQuery(this).parent().parent().parent().hasClass("zf-dependency-show")&&jQuery(this).parent().parent().parent().show())})},this.validateFields=function(){jQuery(".zombify_quiz input[type='file']").each(function(){ZombifyBuilder.validateField(jQuery(this))})},this.validateField=function(e){var t=new Array;if(jQuery(e).attr("zf-validation-extensions")){errMsg=zf.translatable.invalid_file_extension+" "+jQuery(e).attr("zf-validation-extensions");var a=jQuery(e).attr("zf-validation-extensions"),r=a.split(",");for(j=0;j<r.length;j++)r[j]=r[j].trim();for(filesList=jQuery(e)[0].files,i=0;i<filesList.length;i++){var o=filesList[i].name.substr(filesList[i].name.lastIndexOf(".")+1);o=o.toLowerCase(),ZombifyBuilder.inArray(o,r)||(t[t.length]=errMsg)}}if(jQuery(e).attr("zf-validation-maxSize")){errMsg=zf.translatable.invalid_file_size+" "+Math.round(parseInt(jQuery(e).attr("zf-validation-maxSize"))/1024)+"MB";var n=1024*parseInt(jQuery(e).attr("zf-validation-maxSize"));for(filesList=jQuery(e)[0].files,i=0;i<filesList.length;i++)filesList[i].size>n&&(t[t.length]=errMsg)}return t.length>0?(jQuery(e).closest(".zf-form-group").find(".zf-help").length>0?jQuery(e).closest(".zf-form-group").find(".zf-help").html(t.join("<br>")):jQuery(e).closest(".zf-form-group").append('<div class="zf-help">'+t.join("<br>")+"</div>"),!1):(jQuery(e).closest(".zf-form-group").find(".zf-help").remove(),!0)},this.deleteMediaAttachment=function(e){toggleDisabledButton("add"),jQuery.ajax({url:zf.ajaxurl+"?action=zombify_delete_media",type:"POST",data:{attach_id:e,action:"zombify_delete_media"},dataType:"json",success:function(e){toggleDisabledButton("remove")}})},this.inArray=function(e,t){for(var i=t.length,a=0;a<i;a++)if(t[a]==e)return!0;return!1}},zombify_unsaved_form=!1,zombify_virtual_unsaved_form=!1,zombify_virtual_save_interval_default=5e3,zombify_virtual_save_interval_max=12e5,zombify_virtual_save_interval=zombify_virtual_save_interval_default,zombify_video_upload=new Array,zombify_virtual_addit_data={},zf_wysiwyg_config_advanced={language:zf_back.zf_froala_lang,heightMin:zf_back.zf_editor_settings.zf_editor_adv_height,charCounterMax:zf_back.zf_editor_settings.zf_editor_adv_char_counter_max,paragraphFormat:zf_back.zf_editor_settings.zf_editor_paragraphs,placeholderText:zf_back.zf_editor_settings.zf_editor_adv_placeholder,imageDefaultWidth:zf_back.zf_editor_settings.zf_editor_adv_image_default_width,toolbarButtons:zf_back.zf_editor_settings.zf_editor_adv_toolbar,toolbarButtonsMD:zf_back.zf_editor_settings.zf_editor_adv_toolbar,toolbarButtonsSM:zf_back.zf_editor_settings.zf_editor_adv_toolbar,toolbarButtonsXS:zf_back.zf_editor_settings.zf_editor_adv_mobile_toolbar,imageManagerPreloader:zf_back.zf_editor_settings.zf_editor_loader,imageUploadParams:zf_back.zf_editor_image_upload_params,imageManagerLoadParams:zf_back.zf_editor_image_manager_load_params,imageUploadURL:zf_back.zf_editor_image_upload_action,imageManagerLoadURL:zf_back.ajaxurl,imageUploadMethod:"POST",imageManagerLoadMethod:"POST",pastePlain:zf_back.zf_editor_settings.zf_editor_paste_plain,imageMaxSize:zf_back.zf_max_upload_size,spellcheck:zf_back.zf_editor_settings.zf_spellcheck,rtgOptions:zf_back.zf_editor_settings.zf_rtg_options},zf_wysiwyg_config_light={language:zf_back.zf_froala_lang,heightMin:zf_back.zf_editor_settings.zf_editor_lt_height,charCounterMax:zf_back.zf_editor_settings.zf_editor_lt_char_counter_max,paragraphFormat:zf_back.zf_editor_settings.zf_editor_paragraphs,placeholderText:zf_back.zf_editor_settings.zf_editor_lt_placeholder,imageDefaultWidth:zf_back.zf_editor_settings.zf_editor_lt_image_default_width,toolbarButtons:zf_back.zf_editor_settings.zf_editor_lt_toolbar,toolbarButtonsMD:zf_back.zf_editor_settings.zf_editor_lt_toolbar,toolbarButtonsSM:zf_back.zf_editor_settings.zf_editor_lt_toolbar,toolbarButtonsXS:zf_back.zf_editor_settings.zf_editor_lt_mobile_toolbar,imageManagerPreloader:zf_back.zf_editor_settings.zf_editor_loader,imageUploadParams:zf_back.zf_editor_image_upload_params,imageManagerLoadParams:zf_back.zf_editor_image_manager_load_params,imageUploadURL:zf_back.zf_editor_image_upload_action,imageManagerLoadURL:zf_back.ajaxurl,imageUploadMethod:"POST",imageManagerLoadMethod:"POST",pastePlain:zf_back.zf_editor_settings.zf_editor_paste_plain,imageMaxSize:zf_back.zf_max_upload_size,spellcheck:zf_back.zf_editor_settings.zf_spellcheck,rtgOptions:zf_back.zf_editor_settings.zf_rtg_options};"undefined"!=typeof zf_back.zf_editor_settings.quick_insert_buttons&&(zf_wysiwyg_config_advanced.quickInsertButtons=zf_back.zf_editor_settings.quick_insert_buttons,zf_wysiwyg_config_light.quickInsertButtons=zf_back.zf_editor_settings.quick_insert_buttons);var zf_stamp,zf_selected_answer_format;jQuery(document).ready(function(e){window.onbeforeunload=function(e){if(zombify_unsaved_form)return e=e||window.event,e&&(e.returnValue="Are you sure you want to exit without saving?"),"Are you sure you want to exit without saving?"},e('#zombify-main-section input[data-zombify-field-path="title"]:first').focus(),e(document).on("change","#zombify-form :input",function(){zombify_unsaved_form=!0}),ZombifyBuilder.correctBuilder(),e("#zf-fixed-bottom-pane").length&&(e(window).width()>700&&e("#zf-fixed-bottom-pane").appendTo("body"),e(document).on("click",".zombify_preview",function(t){return url_post_id=parseInt(e("#zombify-form").find(".zombify_post_id").val()),url_post_id?e(this).attr("href")?void 0:(t.preventDefault(),!1):(alert(zf_back.translatable.preview_alert),t.preventDefault(),!1)}),e(".zf-post-schedule").length&&(zf_stamp=e("#timestamp").html()),e(document).on("click",".zombify_save",function(t){if(t.preventDefault(),e(".zf-post-schedule").length){var i=handleSchedulingDate();if(!i)return!1}ZombifyBuilder.save(e(this))}),e(document).on("click",".zombify_publish",function(t){if(t.preventDefault(),e(".zf-post-schedule").length){var i=handleSchedulingDate();if(!i)return!1}ZombifyBuilder.save(e(this),!1,!0)})),e(document).on("click",".zombify_add_group",function(t){if(t.preventDefault(),ZombifyBuilder.addGroup(e(this)),"undefined"!=typeof quiz_type&&"undefined"!=typeof group_name&&"trivia"===quiz_type&&"questions"===group_name){var i=e(".zf-answers-box").last();if("input"===i.data("format")){var a=i.find('input[type="radio"][name*="correct"]').first();a.attr("checked",!0),a.attr("default-correct","false")}}zf_video_upload_func()}),e(document).on("click",".zf-components .zombify_add_group",function(t){e(this).closest(".zf-components").removeClass("zf-open")}),e(document).on("click",".zombify_delete_group",function(t){t.preventDefault();var i=e(this),a=i.parents(".zf-answers-box"),r=a.data("format"),o=a.parent().find('input[type="hidden"][data-previous-correct-pointer="true"]');if(ZombifyBuilder.deleteGroup(i),"input"===r&&"undefined"==typeof zf_selected_answer_format||"undefined"!=typeof group_name&&"answers"===group_name&&"input"===zf_selected_answer_format){var n=a.find('input[type="radio"][name*="correct"]').first();n.is(":checked")||(n.attr("checked",!0),n.attr("default-correct","false"))}"undefined"!=typeof group_name&&"answers"===group_name&&o.val("")}),e(document).on("click",".zf-remove-media",function(t){t.preventDefault();var i=e(this).closest(".zf-uploader").find("input[data-zf-media-id]").attr("data-zf-media-id");""!==i&&(zombify_virtual_addit_data.attach_id=i,zombify_virtual_addit_data.addit_action="zf_delete_media"),e(this).closest(".zf-form-group").find(".zombify_uploaded_image_item").remove(),e(this).parents(".zf-uploader").find(".zf_media_player").length>0&&e(this).parents(".zf-uploader").find(".zf_media_player").each(function(){var t=e(this);t[0].pause()}),ZombifyBuilder.deleteMedia(e(this)),ZombifyBuilder.updateShowDependency(),ZombifyBuilder.validateFields(),zombify_virtual_unsaved_form=!0,e(this).parent().find('input[type="file"]').attr("data-zf-file-browsed",1),ZombifyBuilder.virtualSave()}),e(document).on("change",".zf-media-uploader .zf-checkbox-format input",function(){if(this.checked){var t=e(this).data("format");e(this).parent().parent().find('input[type="radio"]').removeAttr("checked"),e(this).attr("checked","checked"),e(this).parent().parent().parent().attr("data-format",t)}}),e(document).on("click",".js-zf-down",function(t){t.preventDefault(),ZombifyBuilder.sort(e(this).closest(".zombify_group"),"down")}),e(document).on("click",".js-zf-up",function(t){t.preventDefault(),ZombifyBuilder.sort(e(this).closest(".zombify_group"),"up")}),e(document).on("change",".zombify_medatype_radio",function(t){ZombifyBuilder.changeMediaType(e(this))}),e(document).on("change",".zombify_quiz input",function(){ZombifyBuilder.updateDependencies(!1),e(this).hasClass("zf-image_url")&&(e(this).parent().find(".zf-submit_url").parents(".zf-uploader").find(".zf-preview-gif").hide(),zf_get_video_by_url(this),e(this).attr("data-zf-url-changed","1"),zombify_virtual_unsaved_form=!0,ZombifyBuilder.virtualSave())}),e(document).on("input",".zombify_quiz :input[data-embed-url='1']",function(){e(this).closest(".zf-embed").find(".zf-embed-video").html(""),parseEmbedURL(e(this),e(this).val(),"100%",500,e(this).attr("data-embed-sources"),1)}),e(document).on("input",".zombify_embed_url_textarea",function(){e(this).closest(".zf-embed").find(".zf-embed-video").html(""),parseEmbedURL(e(this),e(this).val(),"100%",500,e(this).attr("data-embed-sources"),1)}),e(document).on("change",".zombify_quiz .zf-uploader :input[type='file']",function(){var t=e(this).closest("label");if(this.files&&this.files[0]&&(0==e(this).prop("multiple")&&e(this).closest(".zf-form-group").find(".zombify_uploaded_image_item").remove(),ZombifyBuilder.validateField(e(this)))){var i=new FileReader,a=this.files[0].name.split(".").pop().toLowerCase();i.onload=function(i){"mp4"===a?(e(t).find(".zf-preview-gif-mp4").find("source").attr("src",i.target.result),e(t).find(".zf-preview-gif-mp4").show(),e(t).find(".gif-video-wrapper:not(.zf-preview-gif-mp4)").each(function(){e(this).hide()}),e(t).find(".zf-preview-gif-mp4").find("video")[0].load(),e(t).find(".zf-preview-gif-mp4").find("video")[0].play()):(e(t).find(".gif-video-wrapper:not(.zf-preview-img)").each(function(){e(this).hide()}),e(t).find(".zf-preview-img").attr("src",i.target.result).show()),e(t).closest(".zf-uploader").addClass("zf-uploader-uploaded"),ZombifyBuilder.updateShowDependency()},i.readAsDataURL(this.files[0])}}),e(document).on("click",".zf-uploader .zf-start-submit_url",function(t){var i=e(this).parent().find(".zf-start-image_url").val();i?(e(".zf-after-start .zf-image_url").val(i),e(".zf-after-start .zf-image_url").attr("data-zf-url-changed","1"),e(".zf-after-start .zf-submit_url").trigger("click"),e(this).parents(".zf-start").removeClass("zf-open"),e('.zf-after-start input[data-zombify-field-path="title"]:first').focus(),zombify_virtual_unsaved_form=!0,ZombifyBuilder.virtualSave()):e(this).parents(".zf-uploader").find(".zf-get-url-popup").removeClass("zf-open")}),e(document).on("change",".zf-after-start .zf-uploader :input[type='file']",function(){e(".zf-start.zf-open").removeClass("zf-open")}),e(document).on("change",".js-zf-answer-format input",function(){var t=e(this);if(this.checked){var i=t.data("format"),a=t.parent().parent().siblings(".zf-answers-box");a.attr("data-format",i);var r=a.find('input[type="radio"][name*="correct"]');if("input"===i){zf_selected_answer_format="input",r.each(function(t){var i=e(this);i.is(":checked")&&(i.attr("default-correct","true"),i.attr("checked",!1))});var o=r.first();o.attr("checked",!0),o.attr("default-correct")||o.attr("default-correct","false")}else zf_selected_answer_format="text",r.each(function(t){var i=e(this),a=i.attr("default-correct");"true"===a?i.attr("checked",!0):"false"===a&&i.attr("checked",!1),i.removeAttr("default-correct")})}}),e(".js-zf-answer-format input:checked").each(function(){var t=e(this).data("format");e(this).parent().parent().siblings(".zf-answers-box").attr("data-format",t)}),e(document).on("change",".zombify_quiz input",function(){ZombifyBuilder.updateShowDependency()}),e(document).on("click",".zf-js-components_toggle",function(t){t.preventDefault(),e(this).parent().hasClass("zf-open")?e(this).parent().removeClass("zf-open"):e(this).parent().addClass("zf-open")}),e("#tag-editor").length&&e("#tag-editor").tagEditor({placeholder:e("#tag-editor").attr("placeholder"),maxTags:e("#tag-editor").attr("data-count-limit"),autocomplete:{delay:0,position:{collision:"flip"},source:zf_back.ajaxurl+"?action=zombify_get_tags"},forceLowercase:!1}),e(".zombify-screen").hasClass("zf-screen-xs")&&(zf_wysiwyg_config_advanced.heightMin=200,zf_wysiwyg_config_light.heightMin=200),e(".zf-wysiwyg-advanced").each(function(){0===e(this).parents(".zf-erase-before-save").length&&callFroalaEditor(e(this),zf_wysiwyg_config_advanced)}),e(".zf-wysiwyg-light").each(function(){0===e(this).parents(".zf-erase-before-save").length&&callFroalaEditor(e(this),zf_wysiwyg_config_light)}),e(".zf-result-wysiwyg-light.active").each(function(){0===e(this).parents(".zf-erase-before-save").length&&callFroalaEditor(e(this),zf_wysiwyg_config_light)}),e(document).on("click",".zf-result-wysiwyg-light",function(t){t.preventDefault(),t.stopPropagation();var i=e(this);i.addClass("active"),i.animate({height:parseInt(zf_back.zf_editor_settings.zf_editor_lt_height)+45},500,function(){setTimeout(function(){i.froalaEditor(zf_wysiwyg_config_light)},500)})}),e(".zf-multiple-select").zombifyMultiSelect(),ZombifyBuilder.updateShowDependency(),ZombifyBuilder.updateDependencies(!0),e(document).on("change","input[zf-validation-url]",function(){var t=e(this).val();/^https?:\/\//i.test(t)||""==t||(t="http://"+t),e(this).val(t)}),e(document).on("change",".zf-preface-excerpt-cont input[name='zombify[use_preface]']",function(){1==e(this).prop("checked")?e(this).parents(".zf-preface-excerpt-cont").siblings(".zf-preface").addClass("zf-open"):e(this).parents(".zf-preface-excerpt-cont").siblings(".zf-preface").removeClass("zf-open")}),e(document).on("change",".zf-preface-excerpt-cont input[name='zombify[use_excerpt]']",function(){1==e(this).prop("checked")?e(this).parents(".zf-preface-excerpt-cont").siblings(".zf-excerpt").addClass("zf-open"):e(this).parents(".zf-preface-excerpt-cont").siblings(".zf-excerpt").removeClass("zf-open")}),zf_video_upload_func(),e(document).on("click",".zf_discard_virtual",function(){if(window.confirm(zf_back.translatable.confirm_discard_virtual)){var t=e(".zombify_quiz_type").val(),i=e(".zombify_quiz_subtype").val();toggleDisabledButton("add"),jQuery.ajax({url:zf_back.ajaxurl,type:"GET",data:{action:"zombify_discard_virtual",type:t,subtype:i},dataType:"json",success:function(e){toggleDisabledButton("remove"),"undefined"!=typeof e.result&&1==e.result&&window.location.reload()}})}}),zf_autosave_virtual(),e(document).on("click",".zf-preview-video-block",function(e){e.preventDefault()}),e(".zf-preview-video-block").each(function(){var t=e(this);t.hover(function(){t.parents(".zf-uploader").addClass("zf-uploader-on-progress")},function(){t.parents(".zf-uploader").removeClass("zf-uploader-on-progress")})}),"undefined"!=typeof story_first_group&&""!=story_first_group&&(e(".zombify_add_group[data-include-group='"+story_first_group+"']").attr("data-zf-without-focus","1"),e(".zombify_add_group[data-include-group='"+story_first_group+"']").trigger("click")),e(document).on("keyup keypress","#zombify-form",function(e){var t=e.keyCode||e.which;if(13===t)return e.preventDefault(),!1}),e(document).on("click","#zf-edit-timestamp",function(t){t.preventDefault(),e(this).hide(),e("#zf-cancel-timestamp").show(),e("#zf-timestampdiv").show(),e("#display_date_fields").val("block")}),e(document).on("click","#zf-save-timestamp",function(t){t.preventDefault(),handleSchedulingDate("save"),e("#display_date_fields").val("none")}),e(document).on("click","#zf-cancel-timestamp",function(t){t.preventDefault(),e(this).hide(),e("#zf-edit-timestamp").show(),e("#zf-timestampdiv").hide(),handleSchedulingDate("cancel"),e("#display_date_fields").val("none")}),jQuery("body").on("zfAjaxContentLoaded",function(e,t){callMediaElementJs(t.output)})}),jQuery.fn.zombifyMultiSelect=function(){return this.each(function(){var e=jQuery(this),t="",i=[],a=zf_back.zf_category_select_limit;e.find(".zf-select_header").on("click",function(t){e.toggleClass("zf-active")}),e.on("click",function(e){e.stopPropagation()}),jQuery("body").on("click",function(t){e.removeClass("zf-active")});var r=function(){if(i=[],t="",e.find('input[type="checkbox"]:checked').length){e.find('input[type="checkbox"]:checked').each(function(){var e=jQuery(this).data("label");i.push(e)});for(var a=0;a<i.length;a++)t+=a+1==i.length?i[a]:i[a]+", ",e.find(".zf-selected").html(t)}else e.find(".zf-selected").html(e.find(".zf-select_header").data("label"))};r(),e.find('input[type="checkbox"]').on("change",function(t){"1"===a?(jQuery(this).prop("checked")===!1?e.find('input[type="checkbox"]').prop("checked",!1):(e.find('input[type="checkbox"]').prop("checked",!1),jQuery(this).prop("checked",!0)),jQuery(this).parents(".zf-multiple-select").removeClass("zf-active")):1==jQuery(this).prop("checked")&&e.find('input[type="checkbox"]:checked').length>=a?(e.find('input[type="checkbox"]').attr("disabled",!0),e.find('input[type="checkbox"]:checked').attr("disabled",!1)):e.find('input[type="checkbox"]').attr("disabled",!1),r()})})};